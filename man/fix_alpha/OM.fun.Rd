% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_sensitivity_analysis.R
\name{OM.fun}
\alias{OM.fun}
\title{Build per-visit observed/missing indicators by time block}
\usage{
OM.fun(Data, n, nj, cumsum.nj, N)
}
\arguments{
\item{Data}{data.frame (or tibble). Stacked long-format data containing at
least the response column \code{Var1}. Rows are ordered by visit time and
aligned with \code{cumsum.nj}.}

\item{n}{integer. Number of distinct visit times.}

\item{nj}{integer vector of length \eqn{n}. The number of rows (subjects) at
each visit time.}

\item{cumsum.nj}{integer vector of length \eqn{n}. Cumulative sums of
\code{nj}, i.e., \code{cumsum.nj[j] = sum(nj[1:j])}.}

\item{N}{integer. Total number of rows, typically \code{sum(nj)}.}
}
\value{
A list with two components:
\describe{
\item{TO}{list of length \eqn{n}; \code{TO[[j]]} is a 0/1 vector of length
\eqn{n_j} indicating observed entries at visit \eqn{j}.}
\item{TM}{list of length \eqn{n}; \code{TM[[j]]} is a 0/1 vector of length
\eqn{n_j} indicating missing entries at visit \eqn{j}.}
}
}
\description{
Constructs lists of observed (\code{TO}) and missing (\code{TM}) indicators
for each visit time \eqn{j = 1, \ldots, n} from a stacked longitudinal
dataset. A value in \code{Data$Var1} is considered missing if \code{is.na}
returns \code{TRUE}.
}
\details{
For visit \eqn{j}, this function identifies the row-block
\code{idx1 <- (cumsum.nj[j-1]+1):cumsum.nj[j]} (with the first block as
\code{1:cumsum.nj[1]}), and assigns
\itemize{
\item \code{TO[[j]]} as a 0/1 vector of length \eqn{n_j} with 1 if
\code{Var1} is observed and 0 if missing,
\item \code{TM[[j]]} as the complementary 0/1 vector (1 if missing).
}
}
